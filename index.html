<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="theme-color" content="#ff6ad5" />
<title>Naïveté © : Base Instincts</title>

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- SwiperJS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

<style>
:root{
  --accent: #ff6ad5;
  font-family: 'Segoe UI', sans-serif;
}
html,body{height:100%;margin:0;background:#000;color:#fff;-webkit-font-smoothing:antialiased;}

.bg{position:fixed;inset:0;background:center/cover no-repeat url('image.png');filter:contrast(1.03) saturate(1.15);z-index:0;}
.bg::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.6));}

.app{position:relative;z-index:1;min-height:100vh;display:flex;flex-direction:column}
.header{display:flex;align-items:center;justify-content:space-between;padding:14px 6vw}
.connect-btn, #show-rulebook{background:linear-gradient(90deg,var(--accent),#ffd36a);padding:8px 12px;border-radius:999px;font-weight:600;color:#000;cursor:pointer}

.stage{height:220vh;position:relative}
.sticky{position:sticky;top:12vh;height:76vh;display:flex;align-items:center;overflow:hidden}
.track{display:flex;gap:8vw;align-items:center;padding:0 6vw;will-change:transform;}

.card{
  width:84vw;height:56vw;flex:0 0 auto;
  background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));
  backdrop-filter:blur(6px);
  border-radius:1.5rem;box-shadow:0 10px 25px rgba(0,0,0,0.25);
  display:flex;flex-direction:column;transition:transform 0.2s ease-out, box-shadow 0.2s ease-out;
  transform-style:preserve-3d; /* enables subtle 3D rotation */
}
.card.active {
  box-shadow:0 0 35px rgba(255, 218, 122, 0.7), 0 0 15px rgba(255, 106, 213, 0.5);
}

/* Rulebook Overlay stays the same... */
#rulebook-overlay{position:fixed;inset:0;background:linear-gradient(135deg,#ff9a9e,#fad0c4,#a1c4fd);z-index:999;display:none;justify-content:center;align-items:center;padding:2rem;}
.rulebook-close{position:absolute;top:1rem;right:1rem;font-size:2rem;color:#111;cursor:pointer;}
.tutorial-card{background:rgba(255,255,255,0.95);padding:2rem;border-radius:1.5rem;display:flex;flex-direction:column;min-height:300px;}

@media (min-width:700px){.card{width:56vw;height:36vw;}}
</style>
</head>
<body>
<div class="bg"></div>
<div class="app">
  <header class="header">
    <div>
      <div class="title font-bold">Naïveté: Base Instincts</div>
      <div class="subtitle text-sm opacity-75">Broken is beautiful — build your face.</div>
    </div>
    <div class="flex gap-2">
      <button id="connect" class="connect-btn">Connect Wallet</button>
      <button id="show-rulebook" class="connect-btn">Show Rulebook</button>
    </div>
  </header>

  <main>
    <section class="stage">
      <div class="sticky" id="sticky">
        <div class="track" id="track"></div>
      </div>
    </section>

    <section class="footer px-6 pb-12">
      <div class="flex gap-3 opacity-80">
        <div class="chip">72 Card Deck</div>
        <div class="chip">Booster Packs</div>
        <div class="chip">Collect Avatars & Pets</div>
      </div>
    </section>
  </main>
</div>

<!-- Rulebook Overlay -->
<div id="rulebook-overlay" class="flex">
  <span id="close-rulebook" class="rulebook-close">&times;</span>
  <div class="swiper myRulebookSwiper">
    <div class="swiper-wrapper"> … (unchanged tutorial cards) … </div>
    <div class="swiper-pagination mt-4"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="https://unpkg.com/web3modal@1.9.12/dist/index.js"></script>
<script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>

<script>
// ---- Load Avatars into track (placeholder demo) ----
const track = document.getElementById("track");
["Seraphine","Husk Mirror","Thorned Choir","Caged Bride","The Bloom Eater"].forEach(name=>{
  const el=document.createElement("div");
  el.className="card flex items-center justify-center text-center text-xl font-semibold";
  el.textContent=name;
  track.appendChild(el);
});

// ---- Horizontal Scroll + Physics Ease ----
const stage=document.querySelector(".stage");
let target=0, current=0, ease=0.08;
function updateScroll(){
  const rect=stage.getBoundingClientRect();
  target = Math.min(Math.max((window.innerHeight-rect.top)/(rect.height-window.innerHeight),0),1);
  current += (target-current)*ease;
  track.style.transform=`translateX(-${current*50}vw)`;
  requestAnimationFrame(updateScroll);
}
updateScroll();

// ---- Active Card Scaling + Glow + rotateY ----
function lift(){
  const cards=[...document.querySelectorAll('.card')];
  const center=window.innerWidth/2;

  cards.forEach(card=>{
    const r=card.getBoundingClientRect();
    const mid=r.left+r.width/2;
    const dist=Math.abs(center-mid);

    const scale=Math.max(1,1.18-dist/600);
    const rotate=(center-mid)/40; // subtle rotateY

    card.style.transform=`scale(${scale}) rotateY(${rotate}deg)`;

    if(dist<120) card.classList.add("active");
    else card.classList.remove("active");
  });
  requestAnimationFrame(lift);
}
lift();

// ---- Rulebook Toggle ----
document.getElementById("show-rulebook").onclick=()=>overlay.style.display="flex";
document.getElementById("close-rulebook").onclick=()=>overlay.style.display="none";

// ---- Rulebook Swiper ----
new Swiper(".myRulebookSwiper",{effect:'coverflow',centeredSlides:true,slidesPerView:'auto',coverflowEffect:{rotate:30,depth:150},pagination:{el:".swiper-pagination"}});
</script>
</body>
</html>

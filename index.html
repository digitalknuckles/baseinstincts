<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<meta name="theme-color" content="#ff6ad5" />
<title>Naïveté © : Base Instincts</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
:root {
  --bg-overlay: rgba(0,0,0,0.35);
  --accent: #ff6ad5;
  --card-w: 60vw;
  --card-h: 40vw;
  --gutter: 6vw;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
@media (min-width: 768px) {
  :root {
    --card-w: 40vw;
    --card-h: 26vw;
  }
}

html, body {
  height:100%;
  margin:0;
  background:#000;
  color:#fff;
  -webkit-font-smoothing:antialiased;
  overflow-x:hidden;
}

/* background */
.bg {
  position:fixed;
  inset:0;
  background:center/cover no-repeat url('image.png');
  filter:contrast(1.03) saturate(1.15);
}
.bg::after {
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.6));
}

/* layout */
.app { position:relative; z-index:1; min-height:100vh; display:flex; flex-direction:column }
.header { display:flex; align-items:center; justify-content:space-between; padding:14px 6vw }
.title { font-weight:700; font-size:16px; letter-spacing:0.6px }
.subtitle { font-size:11px; opacity:0.9 }
.connect-btn {
  background:linear-gradient(90deg,var(--accent),#ffd36a);
  border:none;
  padding:8px 12px;
  border-radius:999px;
  font-weight:600;
  color:#000;
  cursor:pointer;
}
#show-rulebook { background:linear-gradient(90deg,#ffd36a,var(--accent)); }

/* scroll gallery */
.stage { height:240vh; position:relative }
.sticky { position:sticky; top:12vh; height:76vh; display:flex; align-items:center; overflow:visible; touch-action:pan-y; }
.track {
  display:flex;
  gap:var(--gutter);
  align-items:center;
  padding:0 6vw;
  overflow-x:auto;
  scroll-behavior:smooth;
  cursor:grab;
  -webkit-overflow-scrolling: touch;
}
.track::-webkit-scrollbar { display:none; }
.track:active { cursor:grabbing; }

.card {
  width:var(--card-w);
  height:var(--card-h);
  flex:0 0 auto;
  position:relative;
  border-radius:18px;
  overflow:hidden;
  background:rgba(255,255,255,0.05);
  box-shadow:0 6px 20px rgba(0,0,0,0.45);
  backdrop-filter:blur(8px);
  background-size:cover;
  background-position:center;
  transition:transform 0.4s ease, box-shadow 0.4s ease;
}
.card:hover {
  transform:scale(1.05);
  box-shadow:0 12px 40px rgba(0,0,0,0.6);
}
.card::after {
  content:'';
  position:absolute;
  inset:0;
  background:var(--bg-overlay);
}
.card-content {
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
  padding:20px;
  z-index:2;
}
.card h3 {
  font-size:20px;
  font-weight:700;
  margin-bottom:10px;
  background:linear-gradient(90deg,#ff6ad5,#ffd36a);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.card button {
  align-self:flex-start;
  background:linear-gradient(90deg,var(--accent),#ffd36a);
  color:#000;
  border:none;
  padding:8px 16px;
  border-radius:999px;
  font-weight:600;
  font-size:14px;
  cursor:pointer;
  transition:opacity 0.3s ease;
}
.card button:hover { opacity:0.8; }

.footer {
  padding:18px 6vw 48px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.controls { display:flex; gap:8px }
.chip {
  background:rgba(255,255,255,0.06);
  padding:8px 10px;
  border-radius:999px;
  font-size:13px;
}
</style>
</head>

<body>

<div class="bg"></div>

<div class="app">
  <header class="header">
    <div>
      <div class="title">Naïveté: Base Instincts</div>
      <div class="subtitle">Broken is beautiful — build your face.</div>
    </div>
    <div class="flex gap-2">
      <button id="connect" class="connect-btn">Connect Wallet</button>
      <button id="show-rulebook" class="connect-btn">Rulebook</button>
    </div>
  </header>

  <main>
    <section class="stage">
      <div class="sticky">
        <div class="track" id="track">

          <!-- NFT Collection -->
          <div class="card" style="background-image:url('card1.png')">
            <div class="card-content">
              <h3>NFT Collection</h3>
              <button onclick="window.open('https://opensea.io/collection/naivete','_blank')">View on OpenSea</button>
            </div>
          </div>

          <!-- Game Page (center card) -->
          <div class="card" style="background-image:url('card2.png')">
            <div class="card-content">
              <h3>Card Game</h3>
              <button onclick="window.open('https://www.thegamecrafter.com/games/na%C3%AFvet%C3%A9:-base-instincts','_blank')">Play & Buy</button>
            </div>
          </div>

          <!-- Virtual Gallery -->
          <div class="card" style="background-image:url('card3.png')">
            <div class="card-content">
              <h3>Virtual Gallery</h3>
              <button onclick="window.open('https://www.spatial.io/s/Naivete-Base-Instincts-68f01f9a884893267eca2a70?share=2043180943931599241','_blank')">Enter Gallery</button>
            </div>
          </div>

        </div>
      </div>
    </section>

    <section class="footer">
      <div class="controls">
        <div class="chip">54 Card Deck</div>
        <div class="chip">Booster Packs</div>
        <div class="chip">Collect Avatars, Pets, and Items</div>
      </div>
    </section>
  </main>
</div>

<!-- Rulebook -->
<script type="module" src="rulebook.js"></script>

<!-- Wallet -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script src="https://unpkg.com/web3modal@1.9.12/dist/index.js"></script>
<script src="https://unpkg.com/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>

<script type="module">
// Show Rulebook
document.getElementById("show-rulebook").addEventListener("click", () => {
  document.body.appendChild(document.createElement("naivete-rulebook"));
});

// Wallet Connect
const providerOptions = {
  walletconnect: {
    package: window.WalletConnectProvider.default,
    options: { infuraId: "YOUR_INFURA_ID" }
  }
};
const web3Modal = new window.Web3Modal.default({ cacheProvider: false, providerOptions });
const connectBtn = document.getElementById("connect");
connectBtn.addEventListener("click", async () => {
  try {
    const provider = await web3Modal.connect();
    const ethersProvider = new ethers.providers.Web3Provider(provider);
    const signer = ethersProvider.getSigner();
    const address = await signer.getAddress();
    connectBtn.textContent = address.slice(0,6) + "..." + address.slice(-4);
  } catch (err) { console.error(err); }
});

// Scroll-based carousel effect
const track = document.getElementById("track");
const stage = document.querySelector(".stage");

window.addEventListener("scroll", () => {
  const scrollY = window.scrollY - stage.offsetTop;
  const maxScroll = stage.scrollHeight - window.innerHeight;
  const scrollPercent = Math.min(Math.max(scrollY / maxScroll, 0), 1);
  const maxTranslate = track.scrollWidth - window.innerWidth;
  track.style.transform = `translateX(-${scrollPercent * maxTranslate}px)`;
});

// Drag/Swipe support
let isDown = false;
let startX;
let scrollLeft;

track.addEventListener('mousedown', e => {
  isDown = true;
  startX = e.pageX - track.offsetLeft;
  scrollLeft = track.scrollLeft;
});
track.addEventListener('mouseleave', () => { isDown = false; });
track.addEventListener('mouseup', () => { isDown = false; });
track.addEventListener('mousemove', e => {
  if(!isDown) return;
  e.preventDefault();
  const x = e.pageX - track.offsetLeft;
  const walk = (x - startX) * 1.5;
  track.scrollLeft = scrollLeft - walk;
});

// Touch events
track.addEventListener("touchstart", e => {
  startX = e.touches[0].pageX;
  scrollLeft = track.scrollLeft;
}, {passive:true});
track.addEventListener("touchmove", e => {
  const x = e.touches[0].pageX;
  const walk = (x - startX) * 1.5;
  track.scrollLeft = scrollLeft - walk;
}, {passive:true});
</script>

</body>
</html>
